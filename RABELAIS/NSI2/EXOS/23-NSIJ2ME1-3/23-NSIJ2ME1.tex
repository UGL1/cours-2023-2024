\documentclass[a4paper,12pt,article,firamath]{nsi}
\begin{document}
\resetquestion
\textit{Cet exercice porte sur les arbres binaires, les files et la programmation orientée objet.
    Cet exercice comporte deux parties indépendantes.}\\

\subsection*{Partie 1}

Une entreprise stocke les identifiants de ses clients dans un arbre binaire de
recherche.\\
On rappelle qu'un arbre binaire est composé de nœuds, chacun des nœuds possédant
éventuellement un sous-arbre gauche et éventuellement un sous-arbre droit.\\
La taille d'un arbre est le nombre de nœuds qu'il contient. Sa hauteur est le nombre
de nœuds du plus long chemin qui joint le nœud racine à l'une des feuilles.
On convient que la hauteur d'un arbre ne contenant qu'un nœud vaut 1 et celle de
l'arbre vide vaut 0.\\
Dans cet arbre binaire de recherche, chaque nœud contient une valeur, ici une chaîne
de caractères, qui est, avec l'ordre lexicographique (celui du dictionnaire) :
\begin{itemize}
    \item strictement supérieure à toutes les valeurs des nœuds du sous-arbre gauche ;
    \item  strictement inférieure à toutes les valeurs des nœuds du sous-arbre droit.
\end{itemize}
Ainsi les valeurs de cet arbre sont toutes distinctes.
On considère l'arbre binaire de recherche suivant :
\begin{center}
    \includegraphics[width=7cm]{img/fig01.png}
\end{center}

\question Donner sa taille et sa hauteur.\\

\carreauxseyes{16.8}{1.6}\\

\question Recopier ci-dessous cet arbre après l'ajout des identifiants suivants : \mintinline{python}{'davidbg'}  et \mintinline{python}{'papicoeur'} dans cet ordre.\\

\begin{tikzpicture}
    \draw (0,0) rectangle (\linewidth,5);
\end{tikzpicture}

\question On décide de parcourir cet arbre pour obtenir la liste des identifiants dans l'ordre
lexicographique. Quel parcours doit-on utiliser ?\\

\carreauxseyes{16.8}{1.6}\\

Pour traiter informatiquement les arbres binaires, nous allons utiliser une classe
\mintinline{python}{ABR} .\\
Un arbre binaire de recherche, nommé \mintinline{python}{abr}  dispose des méthodes suivantes :
\begin{itemize}
    \item \mintinline{python}{abr.est_vide()} : renvoie \mintinline{python}{True}  si \mintinline{python}{abr} est vide et \mintinline{python}{False} sinon.
    \item \mintinline{python}{abr.racine()} : renvoie l'élément situé à la racine de \mintinline{python}{abr}  si \mintinline{python}{abr} n'est pas vide et \mintinline{python}{None} sinon.
    \item \mintinline{python}{abr.sg()} : renvoie le sous-arbre gauche de \mintinline{python}{abr}  s'il existe et \mintinline{python}{None} sinon.
    \item \mintinline{python}{abr.sd()}: renvoie le sous-arbre droit de \mintinline{python}{abr} s'il existe et None sinon.
\end{itemize}

On a commencé à écrire une méthode récursive \mintinline{python}{present}  de la classe \mintinline{python}{ABR}, où le paramètre \mintinline{python}{identifiant}  est une chaîne de caractères et qui renvoie \mintinline{python}{True}  si \mintinline{python}{identifiant} est dans l'arbre et \mintinline{python}{False} sinon.\\

\question Compléter ce code
\begin{pyc}
    \begin{minted}{python}
        def present(self, identifiant):
            if self.est_vide():
                return False
            elif self.racine() == identifiant:
                return ...
            elif self.racine() < identifiant:
                return self.sd(). ...
            else:
                return ...
    \end{minted}
\end{pyc}
\subsection*{Partie 2}

On considère une structure de données file que l'on représentera par des éléments en
ligne, l'élément à droite étant la tête de la file et l'élément à gauche étant la queue de
la file.
On appellera \mintinline{python}{f1} la file suivante :
\begin{center}
    \includegraphics[width=6cm]{img/fig02.png}
\end{center}
On suppose que les quatre fonctions suivantes ont été programmées préalablement
en langage Python :
\begin{itemize}
    \item \mintinline{python}{creer_file()}  : renvoie une file vide ;
    \item \mintinline{python}{est_vide(f)}  : renvoie \mintinline{python}{True}  si la file \mintinline{python}{f}  est vide et \mintinline{python}{False}  sinon ;
    \item \mintinline{python}{enfiler(f, e)}  : ajoute l'élément \mintinline{python}{e}  à la queue de la file \mintinline{python}{f}  ;
    \item \mintinline{python}{defiler(f)}  : renvoie l'élément situé à la tête de la file \mintinline{python}{f}  et le retire de la file.
\end{itemize}

\question Donner le résultat renvoyé après l'appel de la fonction \mintinline{python}{est_vide(f1)}.\\

\carreauxseyes{16.8}{1.6}\\

\question Représenter la file \mintinline{python}{f1}  après l'exécution du code \mintinline{python}{defiler(f1)}.\\

\begin{tikzpicture}
    \draw (0,0) rectangle (\linewidth,2);
\end{tikzpicture}

\question Représenter la file \mintinline{python}{f2}  après l'exécution du code suivant :

\begin{pyc}
    \begin{minted}{python}
        f2 = creer_file()
        liste = ['castor', 'python', 'poule']
        for elt in liste:
            enfiler(f2, elt)
    \end{minted}
\end{pyc}

\begin{tikzpicture}
    \draw (0,0) rectangle (\linewidth,2);
\end{tikzpicture}

\question Compléter la fonction \mintinline{python}{longueur}  qui prend en
paramètre une file \mintinline{python}{f}  et qui renvoie le nombre d'éléments qu'elle contient.\\
Après un appel à la fonction, la file \mintinline{python}{f}  doit retrouver son état d'origine.\\

\begin{pyc}
    \begin{minted}{python}
        def longueur(f):
            resultat = 0
            g = creer_file()
            while ... :
                elt = defiler(f)
                resultat = ...
                enfiler(... , ...)
            while not(est_vide(g)):
                enfiler(f, defiler(g))
            return resultat
    \end{minted}
\end{pyc}

Un site impose à ses clients des critères sur leur mot de passe. Pour cela il utilise
la fonction \mintinline{python}{est_valide}  qui prend en paramètre une chaîne de caractères \mintinline{python}{mot}  et qui retourne \mintinline{python}{True}  si mot correspond aux critères et \mintinline{python}{False}  sinon.

\begin{pyc}
    \begin{minted}{python}
        def est_valide(mot):
            if len(mot) < 8:
                return False
            for c in mot:
                if c in ['!', '#', '@', ';', ':']:
                return True
            return False
    \end{minted}
\end{pyc}

\question Entourer le ou les mots validés par cette fonction.

\begin{itemize}
    \item \mintinline{python}{'best@'}
    \item 'paptap23'
    \item '2!@59fgds' 
\end{itemize}

La figure suivante montre, sur deux exemples, l'évolution d'une file \mintinline{python}{f3}  après
l'exécution de l'instruction \mintinline{python}{ajouter_mot(f3, 'super')}  :
\begin{center}
    \includegraphics[width = 15cm]{img/fig03.png}
\end{center}

\question Écrire le code de cette fonction \mintinline{python}{ajouter_mot}  qui prend en paramètres une file \mintinline{python}{f}  (qui a au plus 3 éléments) et une chaîne de caractères valide \mintinline{python}{mdp} . Cette fonction met à jour la file de stockage \mintinline{python}{f}  des mots de passe en y ajoutant \mintinline{python}{mdp}  et en défilant, si nécessaire, pour avoir au maximum trois éléments dans cette file.\\
On pourra utiliser la fonction \mintinline{python}{longueur} définie précédemment.\\

\carreauxseyes{16.8}{8}\\

Pour intensifier sa sécurité, le site stocke les trois derniers mots de passe dans une
file et interdit au client lorsqu'il change son mot de passe d'utiliser l'un des mots de
passe stockés dans cette file.\\

\question Compléter la fonction \mintinline{python}{mot_file}  :
\begin{itemize}
    \item qui prend en paramètres une file \mintinline{python}{f}  et \mintinline{python}{mdp}  de type chaîne de caractères ;
    \item qui renvoie \mintinline{python}{True}  si le mot de passe est un élément de la file \mintinline{python}{f}  et \mintinline{python}{False} sinon.    
\end{itemize}
Après un appel à cette fonction, la file \mintinline{python}{f}  doit retrouver son état d'origine.

\begin{pyc}
    \begin{minted}{python}
        def mot_file(f, mdp):
            g = creer_file()
            present = False
            while not(est_vide(f)):
                elt = defiler(f)
                enfiler(g, elt)
                if ...:
                    present = ...
            while not(est_vide(g)):
                enfiler(f, defiler(g))
            return present
    \end{minted}
\end{pyc}   

\question Écrire une fonction \mintinline{python}{modification}  qui prend en paramètres une file \mintinline{python}{f}  et une chaîne de caractères \mintinline{python}{nv_mdp}.
Si le mot de passe \mintinline{python}{nv_mdp}  répond bien aux deux
exigences des questions \textbf{9.}  et \textbf{11.} , alors elle modifie la file des mots de passe stockés et
renvoie \mintinline{python}{True} . Dans le cas contraire, elle renvoie \mintinline{python}{False}.\\
On pourra utiliser les fonctions \mintinline{python}{mot_file} , \mintinline{python}{est_valide}  et \mintinline{python}{ajouter_mot}.
\end{document}